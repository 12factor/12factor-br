## VIII. Concurrencia
### Escalar mediante el modelo de procesos

Cualquier programa de ordenador, una vez en ejecución, se representa en memoria por uno o más procesos. Las aplicaciones web usan diferentes formas de ejecución de procesos. Por ejemplo, los procesos PHP se ejecutan como procesos pesados, hijos del proceso Apache, que se iniciando cuando el volumen de peticiones lo requiere. Los procesos Java siguen una aproximación distinta, la Máquina Virtual de Java (JVM) proporciona una gran cantidad de procesos que reservan un gran volumen de recursos del sistema (CPU y memoria) al inicio, gestionando la concurrencia internamente mediante procesos ligeros (threads). En ambos casos, los procesos en ejecución pasan practicamente inadvertidos para los desarrolladores de la aplicación.

![La extensión se ve representada por los procesos en ejecución, la diversidad de carga de trabajo se ve representada por los distintos tipos de procesos.](/images/process-types.png)

**En las aplicaciones "twelve-factor", los procesos son ciudadanos de primera clase.** Los procesos de las aplicaciones "twelve-factor" toman ejemplo de [el modelo de procesos de unix para ejecutar demonios](http://adam.heroku.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/). Usando este modelo, el desarrollador puede planificar su aplicación para manejar diversas cargas de trabajo asignando cada tipo de trabajo a un *tipo de proceso*. Por ejemplo, las peticiones HTTP se pueden procesar con un proceso pesado y las tareas con mucha carga de trabajo se pueden procesar con procesos ligeros (threads).

Esto no limita a los procesos a gestionar su propia división interna, mediante threads en la ejecución de la máquina virtual o el modelo asíncrono o por eventos de herramientas como [EventMachine](http://rubyeventmachine.com/), [Twisted](http://twistedmatrix.com/trac/), o [Node.js](http://nodejs.org/). Pero una maquina virtual individual solo puede crecer hasta cierto tamaño, así que la aplicación debe ser capaz de dividirse en multiples procesos que se ejecuten en múltiples máquinas físicas.

El modelo de procesos deja ver todo su potencial cuando llega la hora de escalar. La [naturaleza share-nothing, divisible horizontalmente de los procesos de las aplicaciones "twelve-factor"](./processes) se traduce en un aumento de la concurrencia como una operación simple y fiable. El conjunto de tipos de procesos y el número de procesos de cada tipo es conocido como *process formation*.

Los procesos de las aplicaciones "twelve-factor" [nunca deberían ser demonios](http://dustin.github.com/2010/02/28/running-processes.html) o escribir ficheros de tipo PID. En su lugar, se debe confiar en un gestor de procesos del sistema operativo (como [Upstart](http://upstart.ubuntu.com/), un gestor de procesos distribuido en una plataforma en la nube, o una herramienta como [Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html) en desarrollo) para gestionar [el historial](./logs), responder a procesos que terminan inesperadamente, y gestionar los reinicios y apagados provocados por los usuarios.
